# 5사이클 시뮬레이션 중간 저장 기능 구현

## 문제 상황
1. 5사이클 시뮬레이션 실행 시 "단일시뮬레이션"으로 저장되는 문제
2. 5사이클 시뮬레이션이 오래 걸려 중간에 중단될 경우 데이터 손실 위험

## 해결 방법

### 1. 시뮬레이션 타입 구분 문제 해결
**원인**: 5사이클 시뮬레이션 중 각 사이클에서 `전략_비교_시뮬레이션()` 호출 시 내부에서 "단일시뮬레이션"으로 저장

**수정 내용** (라인 2137-2141):
```python
# 5사이클 진행 중 플래그 확인
if not hasattr(self, '_is_in_5cycle') or not self._is_in_5cycle:
    self._최고전략_히스토리_저장(생존전략, "단일시뮬레이션", ...)
```

### 2. 중간 저장 기능 구현
**각 사이클마다 중간 결과 저장** (라인 3853-3866):
```python
# 각 사이클마다 상위 5개 전략을 히스토리에 저장
if 결과 and '생존전략' in 결과 and len(결과['생존전략']) > 0:
    self._최고전략_히스토리_저장(
        결과['생존전략'], 
        f"5사이클_{사이클}차",  # 예: "5사이클_1차", "5사이클_2차"
        {
            '현재사이클': 사이클,
            '총사이클': 5,
            '시장상황': 시장상황,
            '생존전략수': len(결과['생존전략']),
            '탈락전략수': len(결과.get('탈락기록', []))
        }
    )
```

### 3. 최종 종합랭킹 저장
**5사이클 완료 후 종합 분석 저장** (라인 3911-3916):
```python
self._최고전략_히스토리_저장(상위5전략_정보, "5사이클_종합랭킹", {
    '총사이클수': 5,
    '분석전략수': len(종합랭킹),
    '완료상태': '전체완료',
    '종합평가': '5사이클 모두 완료 후 종합 분석'
})
```

## 개선된 저장 구조
- **단일시뮬레이션**: 일반 단일 시뮬레이션 실행 시
- **5사이클_1차**: 5사이클 중 1차 사이클 완료 시
- **5사이클_2차**: 5사이클 중 2차 사이클 완료 시
- **5사이클_3차**: 5사이클 중 3차 사이클 완료 시
- **5사이클_4차**: 5사이클 중 4차 사이클 완료 시
- **5사이클_5차**: 5사이클 중 5차 사이클 완료 시
- **5사이클_종합랭킹**: 5사이클 모두 완료 후 종합 분석

## 장점
1. 중간에 중단되어도 완료된 사이클까지의 데이터는 보존
2. 각 사이클별 최고 전략 추적 가능
3. 시뮬레이션 타입이 명확히 구분됨
4. 진행 상황을 단계별로 확인 가능

## 확신도
98% - 코드 로직이 명확하고 테스트 가능한 구조로 구현됨